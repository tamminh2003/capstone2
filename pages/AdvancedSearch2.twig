{% extends "layout.twig" %}

{% block content %}

      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
      <script type="text/javascript">
		


function getAdvancedFilters(deviceManufacturerID, deviceTypeID, deviceICD11Code) {
alert('inside advanced search'+deviceManufacturerID+deviceTypeID+deviceICD11Code);
document.getElementById('AdvancedFilters').value = 'Device Manufacturer ID : ' + deviceManufacturerID + 'Device Type ID : ' + deviceTypeID + 'Disease ICD-11 Code : ' + deviceICD11Code;


}


$(function() {
  $("#popupOpen").click(function() {
 

    $("#mainContainer").fadeTo(200, 1);

  });
  $("#closepopupdiv").click(function() {
    $("#mainContainer").fadeOut(200);
  });
});


	</script>
    <style>
#mainContainer{
  position: fixed;
  top: 0px;
  left: 0px;
  z-index: 999;
  height: 100%;
  width: 100%;
  background: rgba(0, 0, 0, 0.2);
  display: none;
}

#popdiv {
height: 70%;
  width: 60%;
  background-color: white;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translateX(-50%) translateY(-50%);
}

body {
  padding-top: 65px;
}
    </style>
	

	<div class="container" >

		<div class="row">


			<div class="col card bg-light bg-gradient mt-5">

				<div class="card-title mt-3">
					<h1 class="text-center text-primary py-2"> Search</h1>
				</div>

				<div class="card-body mt-4">
					<form class="form" action="AdvancedSearch.php" method="get">
						<div class="container">

							<div class="row">

								<div class="col-9">
									<input type="text" class="form-control" id="advanced_text_search" name="advanced_text_search" placeholder="Device ID, Generic Name, Manufacturer Name, Type, Model, Energy Type, Connection Type, Disease name and ICD-11 Code"><br><br/>
								</div>

								<div class="col">
									<button name="AdvancedSearch" class="btn btn-success mt-3,form-control" type="submit">Search</button><br><br/>
								</div>
								<div class="col-2">
									<a id="popupOpen" class="link-secondary text-end">Advanced Filters</a>
                                  
									<br><br/>
								</div>
							</div>
							

						</div>


					</form>
				</div>
			</div>

		</div>

		<div class="row">
			{% for device in devices %}

				<div class="col card bg-light bg-gradient mt-5">

					<div class="card-title mt-3">
						<p class="text-center text-muted">{{ device.ManufactureName }}</p>
					</div>
					<div class="card-body mt-4">
						<div class="container">
							<div class="row">
								<div class="col">

								<img src="{{ device.DeviceImgUrl }}" alt="{{ device.DeviceImgUrl }}" width="150" height="150">
									
								</div>
								<div class="col">
									<p>Device ID : 
										{{device.PoctDeviceId}}</p>
									<p>Device Generic Name: {{ device.GenericName }}</p>
									<p>Device Model: {{ device.DeviceModel }}</p>
									<p>Device Type: {{ device.DeviceType }}</p>
									
								</div>
							</div>
							<div class="row">
								<div class="col">
									<p>Device Description:</p>
									<p>{{ device.DeviceDescription  }}</p>
								</div>
							</div>
						</div>

					</div>
				</div>


				<div class="w-100"></div>
			{% endfor %}
		</div>

        <div id="mainContainer">
            <div id="popdiv">
                <div class="row">
                    <div class="col-11">

                    </div>
                    <div class="col-1 text-right">
                     <button id="closepopupdiv">X</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
<div class="container-fluid"></br>
	
</br>
<div class="row justify-content-center">
	
	<div class="col-4">
		<p class="h3">Select Advanced Filters</p>
	</div>
</div>
</br></br>
<form>

<div class="row mb-3">
               <input type="hidden" id="freeText"  class="form-control my-2" value="{{advancedText}}">
               </div>
                <div class="row mb-3">
                    <label for="inputEmail3" class="col-sm-2 col-form-label">Device Manufacturer</label>
                    <div class="col-sm-10">
                <select class="form-select" id="manufacturerId">
                    <option value="" selected>Choose...</option>
                    {% for manufacturer in manufacturers %}
                    <option value="{{ manufacturer.UserId }}">{{ manufacturer.CompanyName }}</option>
                    {% endfor %}
                    </select>
                    </div>
                </div>
                <div class="row mb-3">
	<label class="col-sm-2 col-form-label">Device Type</label>
	<div class="col-sm-10">
		<select class="form-select" id="deviceType">
			<option value="" selected>Choose...</option>
			{% for deviceType in deviceTypes %}
				<option value="{{ deviceType.PoctDeviceId }}">{{ deviceType.DeviceType }}</option>
			{% endfor %}
		</select>
	</div>
</div>

<div class="row mb-3">
	<label class="col-sm-2 col-form-label">Diesease Select</label>
	<div class="col-sm-2">
		<input type="text" name="selectedICDCode" id="selectedICDCode" class="form-control">
	</div>
	<div class="col-sm-8">
		<a onclick="OpenDieseaseSearchWindow(window)" class="link-secondary text-end">Disease Select</a>
	</br>
</div></div>
<div class="row mb-3">
    <label class="col-sm-2 col-form-label">Device Connection Type</label>
    <div class="col">
	<div class="form-check">
		<input class="form-check-input" type="checkbox" id="Wifi">
		<label class="form-check-label" for="gridCheck1">
			Wifi
		</label>
	</div>
</div>
<div class="col">
	<div class="form-check">
		<input class="form-check-input" type="checkbox" id="Bluetooth">
		<label class="form-check-label" for="gridCheck1">
			Bluetooth
		</label>
	</div>
</div>
<div class="col">
	<div class="form-check">
		<input class="form-check-input" type="checkbox" id="Wired">
		<label class="form-check-label" for="gridCheck1">
			Wired
		</label>
	</div>
</div>
</div>
<div class="row mb-3">
<label class="col-sm-2 col-form-label">Device Energy Type</label>
<div class="col">
	<div class="form-check">
		<input class="form-check-input" type="checkbox" id="Electric">
		<label class="form-check-label" for="gridCheck1">
			Electric
		</label>
	</div>
</div>
<div class="col">
	<div class="form-check">
		<input class="form-check-input" type="checkbox" id="BatteryOperated">
		<label class="form-check-label" for="gridCheck1">
			Battery Operated
		</label>
	</div>
</div>
<div class="col">
	<div class="form-check">
		<input class="form-check-input" type="checkbox" id="SolarPowered">
		<label class="form-check-label" for="gridCheck1">
			Solar Powered
		</label>
	</div>
</div>
</div></br></br>
<div class="row text-center">
    <div class="col-12">
    <button type="submit" class="btn btn-success" style="width:40%" onclick="sendAdvancedFilters()">Search</button>

    
    </div>
    </div>
</div>
</br></br>
</form>

</div>
                    </div>
                    
                </div>
               
            </div>
        </div>
	</div>

  


{% endblock %}

